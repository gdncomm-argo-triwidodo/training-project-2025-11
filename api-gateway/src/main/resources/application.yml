server:
  port: 7070

spring:
  application:
    name: gateway-service
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins:
              - "*"
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
            allowedHeaders:
              - "*"
            exposedHeaders:
              - "*"
            allowCredentials: false
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE
      routes:
        - id: member-service
          uri: http://localhost:8081
          predicates:
            - Path=/member/**
        - id: product-service
          uri: http://localhost:8082
          predicates:
            - Path=/product-service/**
        - id: cart-service
          uri: http://localhost:8083
          predicates:
            - Path=/cart/**

jwt:
  secret: MyVeryLongDefaultSecretKeyMustBeLongEnoughToSatisfyHS256Requirements1234567890

gateway:
  auth:
    public-paths:
      - /member/register
      - /member/login
      - /member/logout
      - /member/hello
      - /product-service/products
      - /product-service/products/
      - /actuator
      - /actuator/**

# Spring Boot Actuator Configuration (WebFlux compatible)
management:
  endpoints:
    web:
      exposure:
        include: "*"
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    metrics:
      enabled: true
    prometheus:
      enabled: true
  metrics:
    export:
      prometheus:
        enabled: true

# Disable JavaMelody for WebFlux (not compatible)
javamelody:
  enabled: false
